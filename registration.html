<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html"; charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>
  <title>2016迎楓舞建</title>
  <!--css-->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="/css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
    <link href="/css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <!--script-->
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="/js/materialize.js"></script>
    <script type="text/javascript" src="/js/ss.js"></script>
  <!--icon-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <!--sweetalert-->
    <script src="/dist/sweetalert.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/dist/sweetalert.css">
</head>

<body>
  <div class="navbar-fixed">
    <nav role="navigation" class="customnavcolor">
    <div class="nav-wrapper container">
      <a id="logo-container" href="/index" class="brand-logo">建楓暑訓</a>
      <ul class="right hide-on-med-and-down">
        <li><a href="/index">主頁</a></li>
        <li><a href="/news">最新消息</a></li>
        <li><a href="/about">活動資訊</a></li>
        <li><a href="/course">活動內容</a></li>
        <li><a href="/regist_detail">報名辦法</a></li>
        <li><a href="/pictures">歷屆照片</a></li>
        <li><a href="/comments">Q&A</a></li>
      </ul>

      <ul id="nav-mobile" class="side-nav">
        <li><a href="/index">主頁</a></li>
        <li><a href="/news">最新消息</a></li>
        <li><a href="/about">活動資訊</a></li>
        <li><a href="/course">活動內容</a></li>
        <li><a href="/regist_detail">報名辦法</a></li>
        <li><a href="/pictures">歷屆照片</a></li>
        <li><a href="/comments">Q&A</a></li>
      </ul>
      <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
    </div>
  </nav>
</div>

<div id="wrn">
  <div class="row">
    <div class="col s12">
      <img class="materialboxed" src="/login_turtorial.png" width="100%">
      <script type="text/javascript">
        $(document).ready(function(){
        $('.materialboxed').materialbox();
       });
      </script>
    </div>
  </div>
</div>
<div id="everything"></div>
        


<footer class="page-footer" style="background-color: #112D4E">
    <div class="container">
      <div class="row">
        <div class="col l6 s12">
          <h5 class="lime-text text-lighten-5">關於主辦</h5>
          <p class="lime-text text-lighten-5">本活動是由"建國中學資訊社"與"中山女高資訊研究社"共同主辦。兩社多年來以推廣資訊為目標，一同籌辦多次大型活動，並富有舉辦活動的經驗。我們秉持著專業與熱誠，摯邀同學們參與活動。</p>


        </div>
        <div class="col l6 s12">
          <h5 class="lime-text text-lighten-5">相關連結</h5>
          <ul>
            <li><a class="lime-text text-lighten-5" target="_blank" href="http://www.infor.org/">建國中學資訊社</a></li>
            <li><a class="lime-text text-lighten-5" target="_blank" href="https://www.facebook.com/infor29th/">INFOR 29th</a></li>
            <hr>
            <li><a class="lime-text text-lighten-5" target="_blank" href="https://www.facebook.com/%E4%B8%AD%E5%B1%B1%E5%A5%B3%E9%AB%98%E8%B3%87%E8%A8%8A%E7%A0%94%E7%A9%B6%E7%A4%BE23rd-227240130967095/?fref=ts">中山女高資訊研究社23rd</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="footer-copyright" style="background-color: #2D4059" >
      <div class="container white-text">
        Last Update: 2016.6.6
      </div>
    </div>
  </footer>
<script>
    $(".button-collapse").sideNav();
</script>

<script src="/socket.io/socket.io.js"></script>
<script>
    var socket = io("https://summer2016.infor.org");
    
    var regerr = function(){
        sweetAlert("Oops...", "Something went wrong!", "error");
    }

    swal({
        title: "Jizz!",
        text: "Registration is not availiable now!",
        type: "error",
        },function(){
            window.location = "https://summer2016.infor.org/"
        });

/*
    var fmsubmit = function(){
        console.log("asd");
        document.getElementById('submit').addEventListener('click',function(){
            swal({
                title: "Are you sure?",
                text: "You can not change any information after submit!",
                type: "warning",
                showCancelButton: true,
                confirmButtonColor: "#99ff99",
                confirmButtonText: "Yes, Submit!",
                cancelButtonText: "No, I want to confirm.",
                closeOnConfirm: false,
                closeOnCancel: true
            }, function(isConfirm){
                if(isConfirm){ 
                    //swal("Deleted!", "Your imaginary file has been deleted.", "success");
                    var name = document.getElementById('name').value;
                    var birth = document.getElementById('birth').value;
                    var id = document.getElementById('ID').value;
                    var phone = document.getElementById('phone').value;
                    var email = document.getElementById('email').value;
                    var school = document.getElementById('school').value;
                    var emername = document.getElementById('emername').value;
                    var emertel = document.getElementById('emertel').value;
                    var eat = document.getElementById('eat').value;
                    var size = document.getElementById('size').value;
                    var ps = document.getElementById('ps').value;

                    var date = [];
                    for(var i=1;i<=7;i++){
                        date.push(document.getElementById('date'+i).checked);
                    }
        
                    if(!(name=="" || birth=="" || id=="" || phone=="" || email=="" || school=="" || emername=="" || emertel=="" || eat=="" || size=="")){
                        var idns = id.substring(1,id.length);
                        var idn = parseInt(idns);
                        var ida = id.substring(0,1);
                        var idan = parseInt(ida);
                        if(isNaN(idan) && idn>100000000 && idn<299999999){
                            socket.emit("reg q",name,birth,id,phone,email,school,fbres,emername,emertel,eat,size,ps,date);
                        }
                        else{
                            regerr();
                        }
                    }
                    else{
                        regerr();
                    }
                } 
            });
        })
    }
    
    socket.on("reg f",function(){
        regerr();
    })

    var fbres;//FB login area
    var selectscript = document.createElement("script");
    selectscript.type = "text/javascript";
    selectscript.src = "/js/ss.js";
    

    (function(d, s, id){
        var js, fjs = d.getElementsByTagName(s)[0];
        if(d.getElementById(id)){return;}
        js = d.createElement(s);
        js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'))

    window.fbAsyncInit = function(){
        FB.init({
            appId : '599019120267296',
            channelUrl : 'http://summer2016.infor.org/registration',
            xfbml : true,
            version : 'v2.6'
        })
        var fblogin = function(){
            FB.login(function(){
                FB.getLoginStatus(function(r){
                    if(r.status=="connected"){
                        FB.api('/me', 'GET', {"fields": ["email","userID"]}, function(res){
                            fbres=r.authResponse.userID;
                            $('#wrn').remove();
                            $('#everything').append('<h2 class="center customtextcolor">報名辦法</h2>\
<div class="container">\
  <div class="row">\
    <form class="col s12">\
      <div class="row">\
        <div class="input-field col s12 m6">\
          <i class="material-icons prefix">account_circle</i>\
          <input id="name" type="text" class="validate">\
          <label for="name">姓名(必填)</label>\
        </div>\
        <div class="input-field col s12 m6">\
          <i class="material-icons prefix">person_pin</i>\
          <input id="birth" type="date" class="datepicker">\
          <label for="birth">生日(必填)</label>\
        </div>\
        <div class="input-field col s12 m6">\
          <i class="material-icons prefix">perm_identity</i>\
          <input id="ID" type="text" class="validate">\
          <label for="ID">身份證字號(必填)</label>\
        </div>\
        <div class="input-field col s12 m6">\
          <i class="material-icons prefix">phone</i>\
          <input id="phone" type="tel" class="validate">\
          <label for="phone">電話(必填)</label>\
        </div>\
        <div class="input-field col s12 m6">\
          <i class="material-icons prefix">email</i>\
          <input id="email" type="email" class="validate">\
          <label for="email">E-mail</label>\
        </div>\
        <div class="input-field col s12 m6">\
          <i class="material-icons prefix">school</i>\
          <input id="school" type="text" class="validate">\
          <label for="school">畢業國中(必填)</label>\
        </div>\
        <div class="input-field col s12 m6">\
          <i class="material-icons prefix">contacts</i>\
          <input id="emername" type="text" class="validate">\
          <label for="school">緊急聯絡人姓名及關係(必填)</label>\
        </div>\
        <div class="input-field col s12 m6">\
          <i class="material-icons prefix">add_alert</i>\
          <input id="emertel" type="text" class="validate">\
          <label for="school">緊急連絡人電話</label>\
        </div>\
        <div class="input-field col s12 m6">\
          <i class="material-icons prefix">restaurant</i>\
    <select id="eat">\
      <option value="" disabled selected>請選擇葷素</option>\
      <option value="meat">葷</option>\
      <option value="veg">素</option>\
    </select>\
  </div>\
  <div class="input-field col s12 m6">\
          <i class="material-icons prefix">accessibility</i>\
    <select id="size">\
      <option value="" disabled selected>請選擇訓服尺寸</option>\
      <option value="XL">XL</option>\
      <option value="L">L</option>\
      <option value="M">M</option>\
      <option value="S">S</option>\
    </select>\
  </div>\
  <div class="input-field col s12 m12">\
          <i class="material-icons prefix">mode_edit</i>\
          <textarea id="ps" class="materialize-textarea"></textarea>\
          <label for="icon_prefix2">備註</label>\
  </div>\
   <div class="col s12" style="margin-left: 1%">\
<p style="font-size: 125%">※哪些天<font color="#FF0000"><b>"無法"</b></font>出席</p>\
    <p>\
      <input type="checkbox" id="date1" />\
      <label class="black-text" for="date1" style="font-size: 125%">7/20(三)&nbsp;&nbsp;&nbsp;&nbsp;</label>\
\
      <input type="checkbox" id="date2" />\
      <label class="black-text" for="date2" style="font-size: 125%">7/21(四)&nbsp;&nbsp;&nbsp;&nbsp;</label>\
\
      <input type="checkbox" id="date3" />\
      <label class="black-text" for="date3" style="font-size: 125%">7/22(五)&nbsp;&nbsp;&nbsp;&nbsp;</label>\
      \
      <input type="checkbox" id="date4" />\
      <label class="black-text" for="date4" style="font-size: 125%">7/23(六)&nbsp;&nbsp;&nbsp;&nbsp;</label>\
    \
      <input type="checkbox" id="date5" />\
      <label class="black-text" for="date5" style="font-size: 125%">7/24(日)&nbsp;&nbsp;&nbsp;&nbsp;</label>\
    \
      <input type="checkbox" id="date6" />\
      <label class="black-text" for="date6" style="font-size: 125%">7/25(一)&nbsp;&nbsp;&nbsp;&nbsp;</label>\
    \
      <input type="checkbox" id="date7" />\
      <label class="black-text" for="date7" style="font-size: 125%">7/26(二)&nbsp;&nbsp;&nbsp;&nbsp;</label>\
    </p>\
    <br>\
   </div>\
   <div class="col s12 center">\
          <button id="submit" class="btn-large waves-effect customnavcolor" type="button" name="actiona" onclick="fmsubmit()">Submit<i class="material-icons right">send</i></button>\
        </div>\
      </div>\
    </form>\
  </div>\
</div>', selectscript)
                        });
                    }
                    else{
                        fblogin();
                    }
                })
            }, {scope: "public_profile"})
        }
        fblogin();
    }
    //FB login area
*/
    
    
    socket.on("reg d",function(){
        swal("Good job!", "Submit successful!", "success")
    })
</script>

</body>
</html>
